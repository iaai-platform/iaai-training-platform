<!-- views/partials/course-card.ejs -->
<div class="course-card" data-course-type="<%= course.courseType %>">
    <div class="course-image">
      <% if (course.mainImage) { %>
        <img src="<%= course.mainImage %>" alt="<%= course.title %>">
      <% } else { %>
        <% if (course.courseType === 'In-Person') { %>
          <i class="fas fa-chalkboard-teacher"></i>
        <% } else if (course.courseType === 'Online-Live') { %>
          <i class="fas fa-video"></i>
        <% } else { %>
          <i class="fas fa-play-circle"></i>
        <% } %>
      <% } %>
      <span class="course-type-badge badge-<%= course.courseType.toLowerCase().replace('-', '-') %>">
        <%= course.typeLabel %>
      </span>
    </div>
  
    <div class="course-content">
      <div class="course-header">
        <div class="course-code">
          <%= course.courseCode || 'N/A' %>
          <% if (course.certificateId) { %>
            <i class="fas fa-certificate has-certificate" title="Certificate Earned" style="float: right;"></i>
          <% } %>
        </div>
        <h3 class="course-title"><%= course.title %></h3>
      </div>
  
      <div class="status-container">
        <span class="status-badge status-<%= course.status.toLowerCase().replace(/\s+/g, '-') %>">
          <% if (course.promoCodeUsed) { %>
            <i class="fas fa-tag"></i>
          <% } %>
          <%= course.status === 'paid' ? 'Paid & Registered' : 
              course.status === 'registered' ? 'Registered' : 
              course.status %>
        </span>
        <% if (course.expiryDate) { %>
          <span style="font-size: 0.8rem; color: #666;">
            Expires: <%= new Date(course.expiryDate).toLocaleDateString() %>
          </span>
        <% } %>
      </div>
  
      <div class="course-info">
        <% if (course.startDate) { %>
          <div class="info-item">
            <i class="fas fa-calendar"></i>
            <span>Starts: <%= new Date(course.startDate).toLocaleDateString() %></span>
          </div>
        <% } %>
  
        <% if (course.location) { %>
          <div class="info-item">
            <i class="fas fa-map-marker-alt"></i>
            <span><%= course.location %></span>
          </div>
        <% } %>
  
        <% if (course.duration) { %>
          <div class="info-item">
            <i class="fas fa-clock"></i>
            <span><%= course.duration %></span>
          </div>
        <% } %>
  
        <% if (course.instructors || course.instructor) { %>
          <div class="info-item">
            <i class="fas fa-user-tie"></i>
            <span><%= course.instructors || course.instructor %></span>
          </div>
        <% } %>
  
        <% if (course.courseType === 'Self-Paced' && course.totalVideos) { %>
          <div class="info-item">
            <i class="fas fa-video"></i>
            <span><%= course.completedVideos || 0 %> / <%= course.totalVideos %> videos completed</span>
          </div>
        <% } %>
  
        <% if (course.courseType === 'Online-Live' && course.platform) { %>
          <div class="info-item">
            <i class="fas fa-desktop"></i>
            <span>Platform: <%= course.platform %></span>
          </div>
        <% } %>
      </div>
  
      <% if (course.progress !== undefined && course.progress > 0) { %>
        <div class="progress-container">
          <div class="progress-label">
            <span>Progress</span>
            <span><%= course.progress %>%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: <%= course.progress %>%"></div>
          </div>
        </div>
      <% } %>
  
      <div class="course-actions">
        <% 
          let detailsUrl = '#';
          let libraryUrl = '#';
          
          if (course.courseType === 'In-Person') {
            detailsUrl = '/in-person/courses/' + course.courseId;
            libraryUrl = '/library/in-person';
          } else if (course.courseType === 'Self-Paced') {
            detailsUrl = '/self-paced-online-training/courses/' + course.courseId;
            libraryUrl = '/library/self-paced';
          } else if (course.courseType === 'Online-Live') {
            detailsUrl = '/online-live-training/courses/' + course.courseId;
            libraryUrl = '/library/live';
          }
        %>
        
        <a href="<%= detailsUrl %>" class="btn btn-secondary" title="View course details">
          <i class="fas fa-info-circle"></i> Details
        </a>
  
        <% if (course.courseType === 'Self-Paced') { %>
          <a href="<%= libraryUrl %>" class="btn btn-success" title="Continue learning">
            <i class="fas fa-play"></i> Continue
          </a>
        <% } else if (course.courseType === 'Online-Live') { %>
          <a href="<%= libraryUrl %>" class="btn btn-primary" title="Access course materials">
            <i class="fas fa-video"></i> Library
          </a>
        <% } else if (course.courseType === 'In-Person') { %>
          <a href="<%= libraryUrl %>" class="btn btn-primary" title="Access course materials">
            <i class="fas fa-book"></i> Library
          </a>
        <% } %>
  
        <% if (course.certificateId) { %>
          <a href="/certificate/<%= course.certificateId %>" class="btn btn-secondary" title="Download certificate">
            <i class="fas fa-certificate"></i>
          </a>
        <% } %>
      </div>
    </div>
  </div>